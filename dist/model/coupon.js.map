{"version":3,"sources":["../../model/coupon.js"],"names":["couponList","page","uid","userkey","pageIndex","ctx","Promise","resolve","reject","post","url","coupon","data","success","res","errcode","errmsg","add","token","fail","err","console","log"],"mappings":";;;;;;AAAA;;AACA;;;;;;kBACe;AACbA,cAAY,EADC;AAEbC,MAFa,sBAEqB;AAAA,QAA1BC,GAA0B,QAA1BA,GAA0B;AAAA,QAArBC,OAAqB,QAArBA,OAAqB;AAAA,QAAZC,SAAY,QAAZA,SAAY;;AAChC,QAAMC,MAAM,IAAZ;AACA,WAAO,IAAIC,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACtC,sBAAMC,IAAN,CAAW;AACTC,aAAQ,WAAIC,MAAZ,YADS;AAETC,cAAM;AACJV,kBADI;AAEJC,0BAFI;AAGJC,qBAAWA,aAAa;AAHpB,SAFG;AAOTS,eAPS,mBAOAC,GAPA,EAOK;AACZA,gBAAMA,IAAIF,IAAV;AACA,cAAIE,IAAIC,OAAJ,IAAe,CAAnB,EAAsB;AACpBV,gBAAIL,UAAJ,GAAiBc,IAAIF,IAArB;AACAL,oBAAQO,IAAIF,IAAZ;AACD,WAHD,MAGO;AACLJ,mBAAOM,IAAIE,MAAX;AACD;AACF;AAfQ,OAAX;AAiBD,KAlBM,CAAP;AAmBD,GAvBY;AAwBbC,KAxBa,sBAwBM;AAAA,QAAbf,GAAa,SAAbA,GAAa;AAAA,QAARgB,KAAQ,SAARA,KAAQ;;AACjB,WAAO,IAAIZ,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACtC,sBAAMC,IAAN,CAAW;AACTC,aAAQ,WAAIC,MAAZ,YAAyBO,KADhB;AAETN,cAAM;AACJV;AADI,SAFG;AAKTW,eALS,mBAKAC,GALA,EAKK;AACZA,gBAAMA,IAAIF,IAAV;AACA,cAAIE,IAAIC,OAAJ,IAAe,CAAnB,EAAsB;AACpBR,oBAAQO,IAAIF,IAAZ;AACD,WAFD,MAEO;AACLJ,mBAAOM,IAAIE,MAAX;AACD;AACF,SAZQ;AAaTG,YAbS,gBAaHC,GAbG,EAaE;AACT;AACAC,kBAAQC,GAAR,CAAYF,GAAZ;AACD;AAhBQ,OAAX;AAkBD,KAnBM,CAAP;AAoBD;AA7CY,C","file":"coupon.js","sourcesContent":["import {url, WX_APP_ID, WX_AUTH_TYPE} from '../config/index';\nimport Utils from '../util/utils';\nexport default {\n  couponList: [],\n  page ({ uid, userkey, pageIndex}) {\n    const ctx = this;\n    return new Promise((resolve, reject) => {\n      Utils.post({\n        url: `${url.coupon}coupons`,\n        data: {\n          uid,\n          userkey,\n          pageIndex: pageIndex || 1\n        },\n        success (res) {\n          res = res.data;\n          if (res.errcode == 0) {\n            ctx.couponList = res.data;\n            resolve(res.data);\n          } else {\n            reject(res.errmsg);\n          }\n        }\n      })\n    })\n  },\n  add ({uid, token}) {\n    return new Promise((resolve, reject) => {\n      Utils.post({\n        url: `${url.coupon}add/${token}`,\n        data: {\n          uid\n        },\n        success (res) {\n          res = res.data;\n          if (res.errcode == 0) {\n            resolve(res.data)\n          } else {\n            reject(res.errmsg);\n          }\n        },\n        fail (err) {\n          // reject();\n          console.log(err);\n        }\n      })\n    })\n  },\n}"]}