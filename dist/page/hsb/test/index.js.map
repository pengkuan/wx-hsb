{"version":3,"sources":["../../../../page/hsb/test/index.js"],"names":["ctx","Page","data","sfAddr","sfAddrOpt","sfAddrIndex","sfAddrSelect","sfAddrData","onLoad","sfCity","then","setData","onProvinceChanged","console","log","err","obj","sub","onCityChanged","sfAddrPickerChange","e","detail","value","sfAddrPickerColumnChange","event","index","column"],"mappings":"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","file":"index.js","sourcesContent":["import trade from '../../../model/trade';\nlet ctx;\nPage({\n\n  data: {\n    sfAddr: ['广东省', '深圳市', '罗湖区'],\n    sfAddrOpt: [[], [], []],\n    sfAddrIndex: [0, 0, 0],\n    sfAddrSelect: [[], [], []],\n    sfAddrData: []\n  },\n\n  onLoad () {\n    ctx = this;\n    let sfAddrSelect = ctx.data.sfAddrSelect;\n    trade.sfCity().then(data => {\n      sfAddrSelect[0] = data;\n      ctx.setData({\n        sfAddrSelect,\n        sfAddrData: data,\n      });\n      ctx.onProvinceChanged(data[0]);\n    }, err => {\n      console.log(err);\n    })\n  },\n\n  /**\n   * 监听province变化\n   * @param obj\n   */\n  onProvinceChanged (obj) {\n    let sfAddrSelect = this.data.sfAddrSelect;\n    if (obj.sub) sfAddrSelect[1] = obj.sub;\n    ctx.setData({sfAddrSelect});\n    ctx.onCityChanged(obj.sub[0])\n  },\n\n  /**\n   * 监听 city 变化\n   */\n  onCityChanged (obj) {\n    let sfAddrSelect = this.data.sfAddrSelect;\n    if (obj.sub) sfAddrSelect[2] = obj.sub;\n  },\n\n  sfAddrPickerChange (e) {\n    this.setData({sfAddrIndex: e.detail.value})\n  },\n\n  sfAddrPickerColumnChange (event) {\n    let index = event.detail.value,\n      column = event.detail.column,\n      sfAddrData = this.data.sfAddrData,\n      sfAddrSelect = this.data.sfAddrSelect,\n      sfAddrIndex = this.data.sfAddrIndex;\n    switch (column) {\n      case 0:\n        sfAddrSelect[1] = sfAddrData[index]['sub'];\n        if (sfAddrSelect[1][0]['sub']) {\n          sfAddrSelect[2] = sfAddrSelect[1][0]['sub']\n        } else {\n          sfAddrSelect[2] = [];\n        }\n        sfAddrIndex[column] = index;\n        sfAddrIndex[column + 1] = 0;\n        sfAddrIndex[column + 2] = 0;\n        break;\n      case 1:\n        if (sfAddrSelect[column][index]['sub']) {\n          sfAddrSelect[2] = sfAddrSelect[column][index]['sub']\n        } else {\n          sfAddrSelect[2] = [];\n        }\n        sfAddrIndex[column] = index;\n        sfAddrIndex[column + 1] = 0;\n        break;\n      case 2:\n        sfAddrIndex[column] = index;\n        break;\n    }\n    sfAddrIndex[column] = index;\n    this.setData({\n      sfAddrSelect,\n      sfAddrIndex\n    })\n  }\n});"]}