{"version":3,"sources":["../../../../page/pages/welcome/index.js"],"names":["ctx","app","getApp","Page","data","imgUrls","iconSearch","cdn","globalData","productList","cateList","cid","bid","text","path","imgSrc","onLoad","wx","setNavigationBarTitle","title","setWhiteNavBar","getProduct","hotList","getStorageSync","length","setData","products","num","pageSize","then","productlist","splice","setStorage","key","switchProducts","e","dataSet","currentTarget","dataset","switchTab","url"],"mappings":";;AAAA;;;;AACA;;;;AACA;;;;;;AACA,IAAIA,YAAJ;AAAA,IAASC,MAAMC,QAAf;;AAEAC,KAAK;;AAEHC,QAAM;AACJC,aAAS,CACP,yBADO,CADL;AAIJC,gBAAY,8BAJR;AAKJC,SAAKN,IAAIO,UAAJ,CAAeD,GALhB;AAMJE,iBAAa,EANT;AAOJC,cAAU,CAAC;AACTC,WAAK,CADI;AAETC,WAAK,CAAC,CAFG;AAGTC,YAAM,MAHG;AAITC,YAAM,mBAJG;AAKTC,cAAQ;AALC,KAAD,EAMP;AACDJ,WAAK,CADJ;AAEDC,WAAK,CAAC,CAFL;AAGDC,YAAM,MAHL;AAIDC,YAAM,mBAJL;AAKDC,cAAQ;AALP,KANO,EAYP;AACDJ,WAAK,CADJ;AAEDC,WAAK,CAAC,CAFL;AAGDC,YAAM,OAHL;AAIDC,YAAM,mBAJL;AAKDC,cAAQ;AALP,KAZO;AAPN,GAFH;;AA8BHC,QA9BG,oBA8BO;AACRhB,UAAM,IAAN;AACAiB,OAAGC,qBAAH,CAAyB;AACvBC,aAAO;AADgB,KAAzB;AAGA,oBAAMC,cAAN;AACA,SAAKC,UAAL;AACD,GArCE;;;AAuCH;AACAA,YAxCG,wBAwCW;AACZ;AACA,QAAIC,UAAUL,GAAGM,cAAH,CAAkB,SAAlB,CAAd;AACA,QAAGD,QAAQE,MAAX,EACExB,IAAIyB,OAAJ,CAAY;AACVhB,mBAAaa;AADH,KAAZ;AAGF,sBAAQI,QAAR,CAAiB,EAACf,KAAK,CAAN,EAASC,KAAK,CAAC,CAAf,EAAkBe,KAAK,CAAvB,EAA0BC,UAAU,CAApC,EAAjB,EAAyDC,IAAzD,CAA8D,gBAAQ;AACpE,UAAIpB,cAAcL,KAAK0B,WAAL,CAAiBC,MAAjB,CAAwB,CAAxB,EAA2B,CAA3B,CAAlB;AACA/B,UAAIyB,OAAJ,CAAY;AACVhB;AADU,OAAZ;AAGAQ,SAAGe,UAAH,CAAc;AACZC,aAAK,SADO;AAEZ7B,cAAMK;AAFM,OAAd;AAID,KATD;AAUD,GAzDE;;;AA2DH;AACAyB,gBA5DG,0BA4DaC,CA5Db,EA4DgB;AACjB,QAAIC,UAAUD,EAAEE,aAAF,CAAgBC,OAA9B;AACArC,QAAIO,UAAJ,CAAeG,GAAf,GAAqByB,QAAQzB,GAA7B;AACAV,QAAIO,UAAJ,CAAeI,GAAf,GAAqBwB,QAAQxB,GAA7B;AACAK,OAAGsB,SAAH,CAAa;AACXC,WAAK;AADM,KAAb;AAGD;AAnEE,CAAL","file":"index.js","sourcesContent":["import user from '../../../model/user';\nimport product from '../../../model/product';\nimport Utils from '../../../util/utils';\nlet ctx, app = getApp();\n\nPage({\n\n  data: {\n    imgUrls: [\n      '../../../img/banner.png',\n    ],\n    iconSearch: '../../../img/icon-search.svg',\n    cdn: app.globalData.cdn,\n    productList: [],\n    cateList: [{\n      cid: 1,\n      bid: -1,\n      text: '手机回收',\n      path: '../products/index',\n      imgSrc: '../../../img/icon-mobile.png',\n    }, {\n      cid: 3,\n      bid: -1,\n      text: '平板回收',\n      path: '../products/index',\n      imgSrc: '../../../img/icon-pad.png'\n    }, {\n      cid: 2,\n      bid: -1,\n      text: '笔记本回收',\n      path: '../products/index',\n      imgSrc: '../../../img/icon-notebook.png'\n    }]\n  },\n\n  onLoad () {\n    ctx = this;\n    wx.setNavigationBarTitle({\n      title: '回收宝'\n    });\n    Utils.setWhiteNavBar();\n    this.getProduct();\n  },\n\n  // 获取热门机型\n  getProduct () {\n    // 先看本地有没有\n    let hotList = wx.getStorageSync('hotList');\n    if(hotList.length)\n      ctx.setData({\n        productList: hotList\n      });\n    product.products({cid: 1, bid: -1, num: 8, pageSize: 8}).then(data => {\n      let productList = data.productlist.splice(0, 8);\n      ctx.setData({\n        productList\n      });\n      wx.setStorage({\n        key: 'hotList',\n        data: productList\n      })\n    })\n  },\n\n  // 跳转到选择机型页面\n  switchProducts (e) {\n    let dataSet = e.currentTarget.dataset;\n    app.globalData.cid = dataSet.cid;\n    app.globalData.bid = dataSet.bid;\n    wx.switchTab({\n      url: '../products/index'\n    })\n  }\n});"]}