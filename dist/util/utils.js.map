{"version":3,"sources":["../../util/utils.js"],"names":["post","config","app","getApp","PID","globalData","pid","header","url","wx","request","get","filedFormat","obj","str","key","hasOwnProperty","length","substr","throttle","fn","delay","timer","context","args","arguments","clearTimeout","setTimeout","apply","inArray","arr","item","Array","result","i","setWhiteNavBar","setNavigationBarColor","frontColor","backgroundColor","unique","tmpArr","indexOf","push","formatNum","num","formatDate","stamp","parseInt","date","Date","Y","getFullYear","M","getMonth","D","getDate","h","getHours","m","getMinutes","s","getSeconds","getCurPageOpt","pages","getCurrentPages","page","options","sortByKey","sort","x","y","getAvailableCoupon","cps","price","temp","couponPrice","isMobile","tel","test","curTimeStamp","getTime"],"mappings":"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","file":"utils.js","sourcesContent":["export default {\n  // POST Request\n  post (config) {\n    let app = getApp();\n    let PID = app.globalData.pid;\n    config['method'] = 'POST';\n    if (config.header) {\n      config.header['Content-Type'] = \"application/x-www-form-urlencoded\";\n    } else {\n      config.header = {\"Content-Type\": \"application/x-www-form-urlencoded\"};\n    }\n    config.url += `?pid=${ PID }`;\n    return wx.request(config);\n  },\n  // Get Request\n  get (config) {\n    let app = getApp();\n    let PID = app.globalData.pid;\n    config.url += `?pid=${ PID }`;\n    return wx.request(config);\n  },\n  // 格式化queryString\n  filedFormat(obj) {\n    let str = \"\";\n    for (let key in obj) {\n      if (obj.hasOwnProperty(key) && obj[key]) {\n        str += `${key}=${obj[key]}&`;\n      }\n    }\n    return str.length ? str.substr(0, str.length - 1) : str;\n  },\n  // 节流函数\n  throttle (fn, delay) {\n    var timer = null;\n    return function () {\n      var context = this, args = arguments;\n      clearTimeout(timer);\n      timer = setTimeout(function () {\n        fn.apply(context, args);\n      }, delay);\n    }\n  },\n  // 是否存在于数组\n  inArray (arr, item, key) {\n    if (!(arr instanceof Array)) return;\n    let result = false;\n    for (let i = 0; i < arr.length; i++) {\n      if (key) {\n        if (arr[i][key] == item[key]) {\n          result = true;\n          break;\n        }\n      } else {\n        if (arr[i] == item) {\n          result = true;\n          break;\n        }\n      }\n    }\n    return result;\n  },\n  // 设置顶部为白底的通用\n  setWhiteNavBar () {\n    wx.setNavigationBarColor({\n      frontColor: '#000000',\n      backgroundColor: '#ffffff'\n    })\n  },\n  //数组去重\n  unique(arr){\n    let tmpArr = [];\n    for (let i = 0; i < arr.length; i++) {\n      if (tmpArr.indexOf(arr[i]) == -1) {\n        tmpArr.push(arr[i]);\n      }\n    }\n    return tmpArr;\n  },\n  // 数字格式化\n  formatNum (num) {\n    return num > 9 ? num : `0${num}`\n  },\n  // 格式化日期对象\n  formatDate (stamp) {\n    stamp = parseInt(stamp);\n    let date = stamp ? new Date(stamp) : new Date();\n    let Y = date.getFullYear();\n    let M = date.getMonth() + 1;\n    let D = date.getDate();\n    let h = date.getHours();\n    let m = date.getMinutes();\n    let s = date.getSeconds();\n    return {\n      Y,\n      M: this.formatNum(M),\n      D: this.formatNum(D),\n      h: this.formatNum(h),\n      m: this.formatNum(m),\n      s: this.formatNum(s),\n    }\n  },\n  // 获取当前页面的query参数\n  getCurPageOpt () {\n    let pages = getCurrentPages();\n    let page = pages[pages.length - 1];\n    return page.options;\n  },\n  // 根据key排序\n  sortByKey (arr, key) {\n    arr.sort((x, y) => y[key] - x[key]);\n  },\n\n  // 获取符合使用规则的代金券\n  getAvailableCoupon (cps, price) {\n    price = parseInt(price);\n    let temp = [];\n    // 过滤达不到估价金额优惠券\n    for (let i = 0; i < cps.length; i++) {\n      cps[i]['useLimited'] = parseInt(cps[i]['useLimited']);\n      cps[i['faceValue']] = parseInt(cps[i['faceValue']]);\n      if (cps[i]['status'] == 10) {\n        let couponPrice = cps[i]['useLimited'] / 1000;\n        if (price >= couponPrice) {\n          temp.push(cps[i]);\n        }\n      }\n    }\n    // 价格排序\n    this.sortByKey(temp, 'faceValue');\n    return temp[0];\n  },\n  // 是否为有效的手机号码\n  isMobile (tel) {\n    return /^1\\d{10}$/.test(tel);\n  },\n  curTimeStamp () {\n    return new Date().getTime();\n  }\n}"]}