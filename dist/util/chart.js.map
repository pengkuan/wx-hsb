{"version":3,"sources":["../../util/chart.js"],"names":["config","yAxisWidth","yAxisSplit","xAxisHeight","xAxisLineHeight","legendHeight","yAxisTitleWidth","padding","columePadding","fontSize","dataPointShape","colors","pieChartLinePadding","pieChartTextPadding","xAxisTextPadding","titleColor","titleFontSize","subtitleColor","subtitleFontSize","toolTipPadding","toolTipBackground","toolTipOpacity","toolTipLineHeight","radarGridCount","radarLabelTextMargin","assign","target","varArgs","TypeError","to","Object","index","arguments","length","nextSource","nextKey","prototype","hasOwnProperty","call","util","toFixed","num","limit","isFloat","approximatelyEqual","num1","num2","Math","abs","isSameSign","isSameXCoordinateArea","p1","p2","x","isCollision","obj1","obj2","end","start","width","y","height","flag","findRange","type","isNaN","Error","multiple","ceil","floor","calValidDistance","distance","chartData","opts","dataChartAreaWidth","xAxisPoints","dataChartWidth","eachSpacing","categories","validDistance","isInAngleRange","angle","startAngle","endAngle","adjust","PI","calRotateTranslate","h","xv","yv","transX","sqrt","transY","createCurveControlPoints","points","i","isNotMiddlePoint","max","min","a","b","pAx","pAy","pBx","pBy","last","ctrA","ctrB","convertCoordinateOrigin","center","avoidCollision","obj","fillSeriesColor","series","map","item","color","getDataRange","minData","maxData","range","minRange","maxRange","measureText","text","undefined","String","split","forEach","test","dataCombine","reduce","data","concat","getSeriesDataItem","seriesItem","name","format","push","getMaxTextListLength","list","lengthList","apply","getRadarCoordinateSeries","eachAngle","CoordinateSeries","getToolTipData","seriesData","calPoints","option","textList","validCalPoints","offset","round","findCurrentIndex","currentPoints","currentIndex","isInExactChartArea","findRadarChartCurrentIndex","radarData","count","eachAngleArea","isInExactPieChartArea","radius","fixAngle","atan2","angleList","rangeStart","rangeEnd","findPieChartCurrentIndex","pieData","len","_start_","_proportion_","pow","splitPoints","newPoints","items","calLegendData","legend","legendList","marginTop","shapeWidth","widthCount","currentRow","itemWidth","calCategoriesData","result","_getXAxisPoints","getXAxisPoints","categoriesTextLenth","maxTextLength","sin","getRadarDataPoints","process","radarOption","extra","radar","each","listItem","tmp","proportion","position","cos","getPieDataPoints","getPieTextMaxLength","maxLength","fixColumeData","columnLen","column","yAxisTotalWidth","spacingValid","dataCount","enableScroll","startX","endX","getDataPoints","validHeight","point","getYAxisTextList","filter","yAxis","rangeSpan","dataRange","eachRange","reverse","calYAxisData","ranges","rangesFormat","Number","disabled","drawPointShape","shape","context","beginPath","setStrokeStyle","setLineWidth","setFillStyle","moveTo","lineTo","arc","rect","closePath","fill","stroke","drawRingTitle","titlefontSize","title","subtitlefontSize","subtitle","titleFontColor","subtitleFontColor","titleHeight","subtitleHeight","margin","textWidth","offsetX","startY","setFontSize","fillText","_textWidth","_startX","_startY","drawPointText","formatVal","drawRadarLabel","centerPosition","labelColor","pos","posRelativeCanvas","drawPieText","lineRadius","textObjectCollection","lastTextObject","seriesConvert","orginX1","orginY1","orginX2","orginY2","orginX3","orginY3","textObject","lineStart","lineEnd","lineStartPoistion","lineEndPoistion","textPosition","curveStartX","textStartX","quadraticCurveTo","drawToolTipSplitLine","endY","drawToolTip","legendWidth","legendMarginRight","arrowWidth","isOverRightBorder","toolTipWidth","toolTipHeight","_scrollDistance_","tooltip","background","setGlobalAlpha","fillRect","drawYAxisTitle","save","translate","rotate","restore","drawColumnDataPoints","_calYAxisData","pop","shift","eachSeries","seriesIndex","dataLabel","drawAreaDataPoints","_calYAxisData2","_getXAxisPoints2","splitPointList","firstPoint","lastPoint","lineStyle","ctrlPoint","bezierCurveTo","drawLineDataPoints","_calYAxisData3","_getXAxisPoints3","drawToolTipBridge","drawXAxis","_getXAxisPoints4","xAxis","gridColor","disableGrid","validWidth","maxXAxisListLength","ratio","_xAxisTextAngle_","fontColor","_calRotateTranslate","drawYAxisGrid","drawYAxis","_calYAxisData4","drawLegend","_calLegendData","itemList","listIndex","legendTextColor","drawPieDataPoints","pieOption","pie","_pieTextMaxLength_","offsetAngle","disablePieStroke","innerPieWidth","ringWidth","valid","drawRadarDataPoints","coordinateAngle","_loop","startPos","radarDataPoints","drawCanvas","draw","Timing","easeIn","easeOut","easeInOut","linear","Animation","isStop","duration","timing","delay","createAnimationFrame","requestAnimationFrame","setTimeout","step","timeStamp","Date","animationFrame","startTimeStamp","_step","timestamp","onProcess","onAnimationFinish","timingFunction","bind","stop","drawCharts","_this","_calCategoriesData","animation","animationInstance","_drawLineDataPoints","event","trigger","_drawColumnDataPoints","_drawAreaDataPoints","Event","events","addEventListener","listener","_len","args","Array","_key","params","slice","e","console","error","Charts","config$$1","wx","createCanvasContext","canvasId","scrollOption","currentOffset","startTouchX","updateData","stopAnimation","getCurrentDataIndex","touches","changedTouches","_touches$","showToolTip","_getToolTipData","scrollStart","scroll","_distance","scrollEnd","_scrollOption","module","exports"],"mappings":"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","file":"chart.js","sourcesContent":["/*\n * charts for WeChat small app v1.0\n *\n * https://github.com/xiaolin3303/wx-charts\n * 2016-11-28\n *\n * Designed and built with all the love of Web\n */\n\n'use strict';\n\nvar config = {\n  yAxisWidth: 15,\n  yAxisSplit: 5,\n  xAxisHeight: 15,\n  xAxisLineHeight: 15,\n  legendHeight: 15,\n  yAxisTitleWidth: 15,\n  padding: 12,\n  columePadding: 3,\n  fontSize: 10,\n  dataPointShape: ['diamond', 'circle', 'triangle', 'rect'],\n  colors: ['#7cb5ec', '#f7a35c', '#434348', '#90ed7d', '#f15c80', '#8085e9'],\n  pieChartLinePadding: 25,\n  pieChartTextPadding: 15,\n  xAxisTextPadding: 3,\n  titleColor: '#333333',\n  titleFontSize: 20,\n  subtitleColor: '#999999',\n  subtitleFontSize: 15,\n  toolTipPadding: 3,\n  toolTipBackground: '#000000',\n  toolTipOpacity: 0.7,\n  toolTipLineHeight: 14,\n  radarGridCount: 3,\n  radarLabelTextMargin: 15\n};\n\n// Object.assign polyfill\n// https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Object/assign\nfunction assign(target, varArgs) {\n  if (target == null) {\n    // TypeError if undefined or null\n    throw new TypeError('Cannot convert undefined or null to object');\n  }\n\n  var to = Object(target);\n\n  for (var index = 1; index < arguments.length; index++) {\n    var nextSource = arguments[index];\n\n    if (nextSource != null) {\n      // Skip over if undefined or null\n      for (var nextKey in nextSource) {\n        // Avoid bugs when hasOwnProperty is shadowed\n        if (Object.prototype.hasOwnProperty.call(nextSource, nextKey)) {\n          to[nextKey] = nextSource[nextKey];\n        }\n      }\n    }\n  }\n  return to;\n}\n\nvar util = {\n  toFixed: function toFixed(num, limit) {\n    limit = limit || 2;\n    if (this.isFloat(num)) {\n      num = num.toFixed(limit);\n    }\n    return num;\n  },\n  isFloat: function isFloat(num) {\n    return num % 1 !== 0;\n  },\n  approximatelyEqual: function approximatelyEqual(num1, num2) {\n    return Math.abs(num1 - num2) < 1e-10;\n  },\n  isSameSign: function isSameSign(num1, num2) {\n    return Math.abs(num1) === num1 && Math.abs(num2) === num2 || Math.abs(num1) !== num1 && Math.abs(num2) !== num2;\n  },\n  isSameXCoordinateArea: function isSameXCoordinateArea(p1, p2) {\n    return this.isSameSign(p1.x, p2.x);\n  },\n  isCollision: function isCollision(obj1, obj2) {\n    obj1.end = {};\n    obj1.end.x = obj1.start.x + obj1.width;\n    obj1.end.y = obj1.start.y - obj1.height;\n    obj2.end = {};\n    obj2.end.x = obj2.start.x + obj2.width;\n    obj2.end.y = obj2.start.y - obj2.height;\n    var flag = obj2.start.x > obj1.end.x || obj2.end.x < obj1.start.x || obj2.end.y > obj1.start.y || obj2.start.y < obj1.end.y;\n\n    return !flag;\n  }\n};\n\nfunction findRange(num, type, limit) {\n  if (isNaN(num)) {\n    throw new Error('[wxCharts] unvalid series data!');\n  }\n  limit = limit || 10;\n  type = type ? type : 'upper';\n  var multiple = 1;\n  while (limit < 1) {\n    limit *= 10;\n    multiple *= 10;\n  }\n  if (type === 'upper') {\n    num = Math.ceil(num * multiple);\n  } else {\n    num = Math.floor(num * multiple);\n  }\n  while (num % limit !== 0) {\n    if (type === 'upper') {\n      num++;\n    } else {\n      num--;\n    }\n  }\n\n  return num / multiple;\n}\n\nfunction calValidDistance(distance, chartData, config, opts) {\n\n  var dataChartAreaWidth = opts.width - config.padding - chartData.xAxisPoints[0];\n  var dataChartWidth = chartData.eachSpacing * opts.categories.length;\n  var validDistance = distance;\n  if (distance >= 0) {\n    validDistance = 0;\n  } else if (Math.abs(distance) >= dataChartWidth - dataChartAreaWidth) {\n    validDistance = dataChartAreaWidth - dataChartWidth;\n  }\n  return validDistance;\n}\n\nfunction isInAngleRange(angle, startAngle, endAngle) {\n  function adjust(angle) {\n    while (angle < 0) {\n      angle += 2 * Math.PI;\n    }\n    while (angle > 2 * Math.PI) {\n      angle -= 2 * Math.PI;\n    }\n\n    return angle;\n  }\n\n  angle = adjust(angle);\n  startAngle = adjust(startAngle);\n  endAngle = adjust(endAngle);\n  if (startAngle > endAngle) {\n    endAngle += 2 * Math.PI;\n    if (angle < startAngle) {\n      angle += 2 * Math.PI;\n    }\n  }\n\n  return angle >= startAngle && angle <= endAngle;\n}\n\nfunction calRotateTranslate(x, y, h) {\n  var xv = x;\n  var yv = h - y;\n\n  var transX = xv + (h - yv - xv) / Math.sqrt(2);\n  transX *= -1;\n\n  var transY = (h - yv) * (Math.sqrt(2) - 1) - (h - yv - xv) / Math.sqrt(2);\n\n  return {\n    transX: transX,\n    transY: transY\n  };\n}\n\nfunction createCurveControlPoints(points, i) {\n\n  function isNotMiddlePoint(points, i) {\n    if (points[i - 1] && points[i + 1]) {\n      return points[i].y >= Math.max(points[i - 1].y, points[i + 1].y) || points[i].y <= Math.min(points[i - 1].y, points[i + 1].y);\n    } else {\n      return false;\n    }\n  }\n\n  var a = 0.2;\n  var b = 0.2;\n  var pAx = null;\n  var pAy = null;\n  var pBx = null;\n  var pBy = null;\n  if (i < 1) {\n    pAx = points[0].x + (points[1].x - points[0].x) * a;\n    pAy = points[0].y + (points[1].y - points[0].y) * a;\n  } else {\n    pAx = points[i].x + (points[i + 1].x - points[i - 1].x) * a;\n    pAy = points[i].y + (points[i + 1].y - points[i - 1].y) * a;\n  }\n\n  if (i > points.length - 3) {\n    var last = points.length - 1;\n    pBx = points[last].x - (points[last].x - points[last - 1].x) * b;\n    pBy = points[last].y - (points[last].y - points[last - 1].y) * b;\n  } else {\n    pBx = points[i + 1].x - (points[i + 2].x - points[i].x) * b;\n    pBy = points[i + 1].y - (points[i + 2].y - points[i].y) * b;\n  }\n\n  // fix issue https://github.com/xiaolin3303/wx-charts/issues/79\n  if (isNotMiddlePoint(points, i + 1)) {\n    pBy = points[i + 1].y;\n  }\n  if (isNotMiddlePoint(points, i)) {\n    pAy = points[i].y;\n  }\n\n  return {\n    ctrA: { x: pAx, y: pAy },\n    ctrB: { x: pBx, y: pBy }\n  };\n}\n\nfunction convertCoordinateOrigin(x, y, center) {\n  return {\n    x: center.x + x,\n    y: center.y - y\n  };\n}\n\nfunction avoidCollision(obj, target) {\n  if (target) {\n    // is collision test\n    while (util.isCollision(obj, target)) {\n      if (obj.start.x > 0) {\n        obj.start.y--;\n      } else if (obj.start.x < 0) {\n        obj.start.y++;\n      } else {\n        if (obj.start.y > 0) {\n          obj.start.y++;\n        } else {\n          obj.start.y--;\n        }\n      }\n    }\n  }\n  return obj;\n}\n\nfunction fillSeriesColor(series, config) {\n  var index = 0;\n  return series.map(function (item) {\n    if (!item.color) {\n      item.color = config.colors[index];\n      index = (index + 1) % config.colors.length;\n    }\n    return item;\n  });\n}\n\nfunction getDataRange(minData, maxData) {\n  var limit = 0;\n  var range = maxData - minData;\n  if (range >= 10000) {\n    limit = 1000;\n  } else if (range >= 1000) {\n    limit = 100;\n  } else if (range >= 100) {\n    limit = 10;\n  } else if (range >= 10) {\n    limit = 5;\n  } else if (range >= 1) {\n    limit = 1;\n  } else if (range >= 0.1) {\n    limit = 0.1;\n  } else {\n    limit = 0.01;\n  }\n  return {\n    minRange: findRange(minData, 'lower', limit),\n    maxRange: findRange(maxData, 'upper', limit)\n  };\n}\n\nfunction measureText(text) {\n  var fontSize = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 10;\n\n  // wx canvas 未实现measureText方法, 此处自行实现\n  text = String(text);\n  var text = text.split('');\n  var width = 0;\n  text.forEach(function (item) {\n    if (/[a-zA-Z]/.test(item)) {\n      width += 7;\n    } else if (/[0-9]/.test(item)) {\n      width += 5.5;\n    } else if (/\\./.test(item)) {\n      width += 2.7;\n    } else if (/-/.test(item)) {\n      width += 3.25;\n    } else if (/[\\u4e00-\\u9fa5]/.test(item)) {\n      width += 10;\n    } else if (/\\(|\\)/.test(item)) {\n      width += 3.73;\n    } else if (/\\s/.test(item)) {\n      width += 2.5;\n    } else if (/%/.test(item)) {\n      width += 8;\n    } else {\n      width += 10;\n    }\n  });\n  return width * fontSize / 10;\n}\n\nfunction dataCombine(series) {\n  return series.reduce(function (a, b) {\n    return (a.data ? a.data : a).concat(b.data);\n  }, []);\n}\n\nfunction getSeriesDataItem(series, index) {\n  var data = [];\n  series.forEach(function (item) {\n    if (item.data[index] !== null && typeof item.data[index] !== 'undefined') {\n      var seriesItem = {};\n      seriesItem.color = item.color;\n      seriesItem.name = item.name;\n      seriesItem.data = item.format ? item.format(item.data[index]) : item.data[index];\n      data.push(seriesItem);\n    }\n  });\n\n  return data;\n}\n\n\n\nfunction getMaxTextListLength(list) {\n  var lengthList = list.map(function (item) {\n    return measureText(item);\n  });\n  return Math.max.apply(null, lengthList);\n}\n\nfunction getRadarCoordinateSeries(length) {\n  var eachAngle = 2 * Math.PI / length;\n  var CoordinateSeries = [];\n  for (var i = 0; i < length; i++) {\n    CoordinateSeries.push(eachAngle * i);\n  }\n\n  return CoordinateSeries.map(function (item) {\n    return -1 * item + Math.PI / 2;\n  });\n}\n\nfunction getToolTipData(seriesData, calPoints, index, categories) {\n  var option = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : {};\n\n  var textList = seriesData.map(function (item) {\n    return {\n      text: option.format ? option.format(item, categories[index]) : item.name + ': ' + item.data,\n      color: item.color\n    };\n  });\n  var validCalPoints = [];\n  var offset = {\n    x: 0,\n    y: 0\n  };\n  calPoints.forEach(function (points) {\n    if (typeof points[index] !== 'undefined' && points[index] !== null) {\n      validCalPoints.push(points[index]);\n    }\n  });\n  validCalPoints.forEach(function (item) {\n    offset.x = Math.round(item.x);\n    offset.y += item.y;\n  });\n\n  offset.y /= validCalPoints.length;\n  return { textList: textList, offset: offset };\n}\n\nfunction findCurrentIndex(currentPoints, xAxisPoints, opts, config) {\n  var offset = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : 0;\n\n  var currentIndex = -1;\n  if (isInExactChartArea(currentPoints, opts, config)) {\n    xAxisPoints.forEach(function (item, index) {\n      if (currentPoints.x + offset > item) {\n        currentIndex = index;\n      }\n    });\n  }\n\n  return currentIndex;\n}\n\nfunction isInExactChartArea(currentPoints, opts, config) {\n  return currentPoints.x < opts.width - config.padding && currentPoints.x > config.padding + config.yAxisWidth + config.yAxisTitleWidth && currentPoints.y > config.padding && currentPoints.y < opts.height - config.legendHeight - config.xAxisHeight - config.padding;\n}\n\nfunction findRadarChartCurrentIndex(currentPoints, radarData, count) {\n  var eachAngleArea = 2 * Math.PI / count;\n  var currentIndex = -1;\n  if (isInExactPieChartArea(currentPoints, radarData.center, radarData.radius)) {\n    var fixAngle = function fixAngle(angle) {\n      if (angle < 0) {\n        angle += 2 * Math.PI;\n      }\n      if (angle > 2 * Math.PI) {\n        angle -= 2 * Math.PI;\n      }\n      return angle;\n    };\n\n    var angle = Math.atan2(radarData.center.y - currentPoints.y, currentPoints.x - radarData.center.x);\n    angle = -1 * angle;\n    if (angle < 0) {\n      angle += 2 * Math.PI;\n    }\n\n    var angleList = radarData.angleList.map(function (item) {\n      item = fixAngle(-1 * item);\n\n      return item;\n    });\n\n    angleList.forEach(function (item, index) {\n      var rangeStart = fixAngle(item - eachAngleArea / 2);\n      var rangeEnd = fixAngle(item + eachAngleArea / 2);\n      if (rangeEnd < rangeStart) {\n        rangeEnd += 2 * Math.PI;\n      }\n      if (angle >= rangeStart && angle <= rangeEnd || angle + 2 * Math.PI >= rangeStart && angle + 2 * Math.PI <= rangeEnd) {\n        currentIndex = index;\n      }\n    });\n  }\n\n  return currentIndex;\n}\n\nfunction findPieChartCurrentIndex(currentPoints, pieData) {\n  var currentIndex = -1;\n  if (isInExactPieChartArea(currentPoints, pieData.center, pieData.radius)) {\n    var angle = Math.atan2(pieData.center.y - currentPoints.y, currentPoints.x - pieData.center.x);\n    angle = -angle;\n    for (var i = 0, len = pieData.series.length; i < len; i++) {\n      var item = pieData.series[i];\n      if (isInAngleRange(angle, item._start_, item._start_ + item._proportion_ * 2 * Math.PI)) {\n        currentIndex = i;\n        break;\n      }\n    }\n  }\n\n  return currentIndex;\n}\n\nfunction isInExactPieChartArea(currentPoints, center, radius) {\n  return Math.pow(currentPoints.x - center.x, 2) + Math.pow(currentPoints.y - center.y, 2) <= Math.pow(radius, 2);\n}\n\nfunction splitPoints(points) {\n  var newPoints = [];\n  var items = [];\n  points.forEach(function (item, index) {\n    if (item !== null) {\n      items.push(item);\n    } else {\n      if (items.length) {\n        newPoints.push(items);\n      }\n      items = [];\n    }\n  });\n  if (items.length) {\n    newPoints.push(items);\n  }\n\n  return newPoints;\n}\n\nfunction calLegendData(series, opts, config) {\n  if (opts.legend === false) {\n    return {\n      legendList: [],\n      legendHeight: 0\n    };\n  }\n  var padding = 5;\n  var marginTop = 8;\n  var shapeWidth = 15;\n  var legendList = [];\n  var widthCount = 0;\n  var currentRow = [];\n  series.forEach(function (item) {\n    var itemWidth = 3 * padding + shapeWidth + measureText(item.name || 'undefined');\n    if (widthCount + itemWidth > opts.width) {\n      legendList.push(currentRow);\n      widthCount = itemWidth;\n      currentRow = [item];\n    } else {\n      widthCount += itemWidth;\n      currentRow.push(item);\n    }\n  });\n  if (currentRow.length) {\n    legendList.push(currentRow);\n  }\n\n  return {\n    legendList: legendList,\n    legendHeight: legendList.length * (config.fontSize + marginTop) + padding\n  };\n}\n\nfunction calCategoriesData(categories, opts, config) {\n  var result = {\n    angle: 0,\n    xAxisHeight: config.xAxisHeight\n  };\n\n  var _getXAxisPoints = getXAxisPoints(categories, opts, config),\n    eachSpacing = _getXAxisPoints.eachSpacing;\n\n  // get max length of categories text\n\n\n  var categoriesTextLenth = categories.map(function (item) {\n    return measureText(item);\n  });\n\n  var maxTextLength = Math.max.apply(this, categoriesTextLenth);\n\n  if (maxTextLength + 2 * config.xAxisTextPadding > eachSpacing) {\n    result.angle = 45 * Math.PI / 180;\n    result.xAxisHeight = 2 * config.xAxisTextPadding + maxTextLength * Math.sin(result.angle);\n  }\n\n  return result;\n}\n\nfunction getRadarDataPoints(angleList, center, radius, series, opts) {\n  var process = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : 1;\n\n  var radarOption = opts.extra.radar || {};\n  radarOption.max = radarOption.max || 0;\n  var maxData = Math.max(radarOption.max, Math.max.apply(null, dataCombine(series)));\n\n  var data = [];\n  series.forEach(function (each) {\n    var listItem = {};\n    listItem.color = each.color;\n    listItem.data = [];\n    each.data.forEach(function (item, index) {\n      var tmp = {};\n      tmp.angle = angleList[index];\n\n      tmp.proportion = item / maxData;\n      tmp.position = convertCoordinateOrigin(radius * tmp.proportion * process * Math.cos(tmp.angle), radius * tmp.proportion * process * Math.sin(tmp.angle), center);\n      listItem.data.push(tmp);\n    });\n\n    data.push(listItem);\n  });\n\n  return data;\n}\n\nfunction getPieDataPoints(series) {\n  var process = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n\n  var count = 0;\n  var _start_ = 0;\n  series.forEach(function (item) {\n    item.data = item.data === null ? 0 : item.data;\n    count += item.data;\n  });\n  series.forEach(function (item) {\n    item.data = item.data === null ? 0 : item.data;\n    item._proportion_ = item.data / count * process;\n  });\n  series.forEach(function (item) {\n    item._start_ = _start_;\n    _start_ += 2 * item._proportion_ * Math.PI;\n  });\n\n  return series;\n}\n\nfunction getPieTextMaxLength(series) {\n  series = getPieDataPoints(series);\n  var maxLength = 0;\n  series.forEach(function (item) {\n    var text = item.format ? item.format(+item._proportion_.toFixed(2)) : util.toFixed(item._proportion_ * 100) + '%';\n    maxLength = Math.max(maxLength, measureText(text));\n  });\n\n  return maxLength;\n}\n\nfunction fixColumeData(points, eachSpacing, columnLen, index, config, opts) {\n  return points.map(function (item) {\n    if (item === null) {\n      return null;\n    }\n    item.width = (eachSpacing - 2 * config.columePadding) / columnLen;\n\n    if (opts.extra.column && opts.extra.column.width && +opts.extra.column.width > 0) {\n      // customer column width\n      item.width = Math.min(item.width, +opts.extra.column.width);\n    } else {\n      // default width should less tran 25px\n      // don't ask me why, I don't know\n      item.width = Math.min(item.width, 25);\n    }\n    item.x += (index + 0.5 - columnLen / 2) * item.width;\n\n    return item;\n  });\n}\n\nfunction getXAxisPoints(categories, opts, config) {\n  var yAxisTotalWidth = config.yAxisWidth + config.yAxisTitleWidth;\n  var spacingValid = opts.width - 2 * config.padding - yAxisTotalWidth;\n  var dataCount = opts.enableScroll ? Math.min(5, categories.length) : categories.length;\n  var eachSpacing = spacingValid / dataCount;\n\n  var xAxisPoints = [];\n  var startX = config.padding + yAxisTotalWidth;\n  var endX = opts.width - config.padding;\n  categories.forEach(function (item, index) {\n    xAxisPoints.push(startX + index * eachSpacing);\n  });\n  if (opts.enableScroll === true) {\n    xAxisPoints.push(startX + categories.length * eachSpacing);\n  } else {\n    xAxisPoints.push(endX);\n  }\n\n  return { xAxisPoints: xAxisPoints, startX: startX, endX: endX, eachSpacing: eachSpacing };\n}\n\nfunction getDataPoints(data, minRange, maxRange, xAxisPoints, eachSpacing, opts, config) {\n  var process = arguments.length > 7 && arguments[7] !== undefined ? arguments[7] : 1;\n\n  var points = [];\n  var validHeight = opts.height - 2 * config.padding - config.xAxisHeight - config.legendHeight;\n  data.forEach(function (item, index) {\n    if (item === null) {\n      points.push(null);\n    } else {\n      var point = {};\n      point.x = xAxisPoints[index] + Math.round(eachSpacing / 2);\n      var height = validHeight * (item - minRange) / (maxRange - minRange);\n      height *= process;\n      point.y = opts.height - config.xAxisHeight - config.legendHeight - Math.round(height) - config.padding;\n      points.push(point);\n    }\n  });\n\n  return points;\n}\n\nfunction getYAxisTextList(series, opts, config) {\n  var data = dataCombine(series);\n  // remove null from data\n  data = data.filter(function (item) {\n    return item !== null;\n  });\n  var minData = Math.min.apply(this, data);\n  var maxData = Math.max.apply(this, data);\n  if (typeof opts.yAxis.min === 'number') {\n    minData = Math.min(opts.yAxis.min, minData);\n  }\n  if (typeof opts.yAxis.max === 'number') {\n    maxData = Math.max(opts.yAxis.max, maxData);\n  }\n\n  // fix issue https://github.com/xiaolin3303/wx-charts/issues/9\n  if (minData === maxData) {\n    var rangeSpan = maxData || 1;\n    minData -= rangeSpan;\n    maxData += rangeSpan;\n  }\n\n  var dataRange = getDataRange(minData, maxData);\n  var minRange = dataRange.minRange;\n  var maxRange = dataRange.maxRange;\n\n  var range = [];\n  var eachRange = (maxRange - minRange) / config.yAxisSplit;\n\n  for (var i = 0; i <= config.yAxisSplit; i++) {\n    range.push(minRange + eachRange * i);\n  }\n  return range.reverse();\n}\n\nfunction calYAxisData(series, opts, config) {\n\n  var ranges = getYAxisTextList(series, opts, config);\n  var yAxisWidth = config.yAxisWidth;\n  var rangesFormat = ranges.map(function (item) {\n    item = util.toFixed(item, 2);\n    item = opts.yAxis.format ? opts.yAxis.format(Number(item)) : item;\n    yAxisWidth = Math.max(yAxisWidth, measureText(item) + 5);\n    return item;\n  });\n  if (opts.yAxis.disabled === true) {\n    yAxisWidth = 0;\n  }\n\n  return { rangesFormat: rangesFormat, ranges: ranges, yAxisWidth: yAxisWidth };\n}\n\nfunction drawPointShape(points, color, shape, context) {\n  context.beginPath();\n  context.setStrokeStyle(\"#ffffff\");\n  context.setLineWidth(1);\n  context.setFillStyle(color);\n\n  if (shape === 'diamond') {\n    points.forEach(function (item, index) {\n      if (item !== null) {\n        context.moveTo(item.x, item.y - 4.5);\n        context.lineTo(item.x - 4.5, item.y);\n        context.lineTo(item.x, item.y + 4.5);\n        context.lineTo(item.x + 4.5, item.y);\n        context.lineTo(item.x, item.y - 4.5);\n      }\n    });\n  } else if (shape === 'circle') {\n    points.forEach(function (item, index) {\n      if (item !== null) {\n        context.moveTo(item.x + 3.5, item.y);\n        context.arc(item.x, item.y, 4, 0, 2 * Math.PI, false);\n      }\n    });\n  } else if (shape === 'rect') {\n    points.forEach(function (item, index) {\n      if (item !== null) {\n        context.moveTo(item.x - 3.5, item.y - 3.5);\n        context.rect(item.x - 3.5, item.y - 3.5, 7, 7);\n      }\n    });\n  } else if (shape === 'triangle') {\n    points.forEach(function (item, index) {\n      if (item !== null) {\n        context.moveTo(item.x, item.y - 4.5);\n        context.lineTo(item.x - 4.5, item.y + 4.5);\n        context.lineTo(item.x + 4.5, item.y + 4.5);\n        context.lineTo(item.x, item.y - 4.5);\n      }\n    });\n  }\n  context.closePath();\n  context.fill();\n  context.stroke();\n}\n\nfunction drawRingTitle(opts, config, context) {\n  var titlefontSize = opts.title.fontSize || config.titleFontSize;\n  var subtitlefontSize = opts.subtitle.fontSize || config.subtitleFontSize;\n  var title = opts.title.name || '';\n  var subtitle = opts.subtitle.name || '';\n  var titleFontColor = opts.title.color || config.titleColor;\n  var subtitleFontColor = opts.subtitle.color || config.subtitleColor;\n  var titleHeight = title ? titlefontSize : 0;\n  var subtitleHeight = subtitle ? subtitlefontSize : 0;\n  var margin = 5;\n  if (subtitle) {\n    var textWidth = measureText(subtitle, subtitlefontSize);\n    var startX = (opts.width - textWidth) / 2 + (opts.subtitle.offsetX || 0);\n    var startY = (opts.height - config.legendHeight + subtitlefontSize) / 2;\n    if (title) {\n      startY -= (titleHeight + margin) / 2;\n    }\n    context.beginPath();\n    context.setFontSize(subtitlefontSize);\n    context.setFillStyle(subtitleFontColor);\n    context.fillText(subtitle, startX, startY);\n    context.stroke();\n    context.closePath();\n  }\n  if (title) {\n    var _textWidth = measureText(title, titlefontSize);\n    var _startX = (opts.width - _textWidth) / 2 + (opts.title.offsetX || 0);\n    var _startY = (opts.height - config.legendHeight + titlefontSize) / 2;\n    if (subtitle) {\n      _startY += (subtitleHeight + margin) / 2;\n    }\n    context.beginPath();\n    context.setFontSize(titlefontSize);\n    context.setFillStyle(titleFontColor);\n    context.fillText(title, _startX, _startY);\n    context.stroke();\n    context.closePath();\n  }\n}\n\nfunction drawPointText(points, series, config, context) {\n  // 绘制数据文案\n  var data = series.data;\n\n  context.beginPath();\n  context.setFontSize(config.fontSize);\n  context.setFillStyle('#666666');\n  points.forEach(function (item, index) {\n    if (item !== null) {\n      var formatVal = series.format ? series.format(data[index]) : data[index];\n      context.fillText(formatVal, item.x - measureText(formatVal) / 2, item.y - 2);\n    }\n  });\n  context.closePath();\n  context.stroke();\n}\n\nfunction drawRadarLabel(angleList, radius, centerPosition, opts, config, context) {\n  var radarOption = opts.extra.radar || {};\n  radius += config.radarLabelTextMargin;\n  context.beginPath();\n  context.setFontSize(config.fontSize);\n  context.setFillStyle(radarOption.labelColor || '#666666');\n  angleList.forEach(function (angle, index) {\n    var pos = {\n      x: radius * Math.cos(angle),\n      y: radius * Math.sin(angle)\n    };\n    var posRelativeCanvas = convertCoordinateOrigin(pos.x, pos.y, centerPosition);\n    var startX = posRelativeCanvas.x;\n    var startY = posRelativeCanvas.y;\n    if (util.approximatelyEqual(pos.x, 0)) {\n      startX -= measureText(opts.categories[index] || '') / 2;\n    } else if (pos.x < 0) {\n      startX -= measureText(opts.categories[index] || '');\n    }\n    context.fillText(opts.categories[index] || '', startX, startY + config.fontSize / 2);\n  });\n  context.stroke();\n  context.closePath();\n}\n\nfunction drawPieText(series, opts, config, context, radius, center) {\n  var lineRadius = radius + config.pieChartLinePadding;\n  var textObjectCollection = [];\n  var lastTextObject = null;\n\n  var seriesConvert = series.map(function (item) {\n    var arc = 2 * Math.PI - (item._start_ + 2 * Math.PI * item._proportion_ / 2);\n    var text = item.format ? item.format(+item._proportion_.toFixed(2)) : util.toFixed(item._proportion_ * 100) + '%';\n    var color = item.color;\n    return { arc: arc, text: text, color: color };\n  });\n  seriesConvert.forEach(function (item) {\n    // line end\n    var orginX1 = Math.cos(item.arc) * lineRadius;\n    var orginY1 = Math.sin(item.arc) * lineRadius;\n\n    // line start\n    var orginX2 = Math.cos(item.arc) * radius;\n    var orginY2 = Math.sin(item.arc) * radius;\n\n    // text start\n    var orginX3 = orginX1 >= 0 ? orginX1 + config.pieChartTextPadding : orginX1 - config.pieChartTextPadding;\n    var orginY3 = orginY1;\n\n    var textWidth = measureText(item.text);\n    var startY = orginY3;\n\n    if (lastTextObject && util.isSameXCoordinateArea(lastTextObject.start, { x: orginX3 })) {\n      if (orginX3 > 0) {\n        startY = Math.min(orginY3, lastTextObject.start.y);\n      } else if (orginX1 < 0) {\n        startY = Math.max(orginY3, lastTextObject.start.y);\n      } else {\n        if (orginY3 > 0) {\n          startY = Math.max(orginY3, lastTextObject.start.y);\n        } else {\n          startY = Math.min(orginY3, lastTextObject.start.y);\n        }\n      }\n    }\n\n    if (orginX3 < 0) {\n      orginX3 -= textWidth;\n    }\n\n    var textObject = {\n      lineStart: {\n        x: orginX2,\n        y: orginY2\n      },\n      lineEnd: {\n        x: orginX1,\n        y: orginY1\n      },\n      start: {\n        x: orginX3,\n        y: startY\n      },\n      width: textWidth,\n      height: config.fontSize,\n      text: item.text,\n      color: item.color\n    };\n\n    lastTextObject = avoidCollision(textObject, lastTextObject);\n    textObjectCollection.push(lastTextObject);\n  });\n\n  textObjectCollection.forEach(function (item) {\n    var lineStartPoistion = convertCoordinateOrigin(item.lineStart.x, item.lineStart.y, center);\n    var lineEndPoistion = convertCoordinateOrigin(item.lineEnd.x, item.lineEnd.y, center);\n    var textPosition = convertCoordinateOrigin(item.start.x, item.start.y, center);\n    context.setLineWidth(1);\n    context.setFontSize(config.fontSize);\n    context.beginPath();\n    context.setStrokeStyle(item.color);\n    context.setFillStyle(item.color);\n    context.moveTo(lineStartPoistion.x, lineStartPoistion.y);\n    var curveStartX = item.start.x < 0 ? textPosition.x + item.width : textPosition.x;\n    var textStartX = item.start.x < 0 ? textPosition.x - 5 : textPosition.x + 5;\n    context.quadraticCurveTo(lineEndPoistion.x, lineEndPoistion.y, curveStartX, textPosition.y);\n    context.moveTo(lineStartPoistion.x, lineStartPoistion.y);\n    context.stroke();\n    context.closePath();\n    context.beginPath();\n    context.moveTo(textPosition.x + item.width, textPosition.y);\n    context.arc(curveStartX, textPosition.y, 2, 0, 2 * Math.PI);\n    context.closePath();\n    context.fill();\n    context.beginPath();\n    context.setFillStyle('#666666');\n    context.fillText(item.text, textStartX, textPosition.y + 3);\n    context.closePath();\n    context.stroke();\n\n    context.closePath();\n  });\n}\n\nfunction drawToolTipSplitLine(offsetX, opts, config, context) {\n  var startY = config.padding;\n  var endY = opts.height - config.padding - config.xAxisHeight - config.legendHeight;\n  context.beginPath();\n  context.setStrokeStyle('#cccccc');\n  context.setLineWidth(1);\n  context.moveTo(offsetX, startY);\n  context.lineTo(offsetX, endY);\n  context.stroke();\n  context.closePath();\n}\n\nfunction drawToolTip(textList, offset, opts, config, context) {\n  var legendWidth = 4;\n  var legendMarginRight = 5;\n  var arrowWidth = 8;\n  var isOverRightBorder = false;\n  offset = assign({\n    x: 0,\n    y: 0\n  }, offset);\n  offset.y -= 8;\n  var textWidth = textList.map(function (item) {\n    return measureText(item.text);\n  });\n\n  var toolTipWidth = legendWidth + legendMarginRight + 4 * config.toolTipPadding + Math.max.apply(null, textWidth);\n  var toolTipHeight = 2 * config.toolTipPadding + textList.length * config.toolTipLineHeight;\n\n  // if beyond the right border\n  if (offset.x - Math.abs(opts._scrollDistance_) + arrowWidth + toolTipWidth > opts.width) {\n    isOverRightBorder = true;\n  }\n\n  // draw background rect\n  context.beginPath();\n  context.setFillStyle(opts.tooltip.option.background || config.toolTipBackground);\n  context.setGlobalAlpha(config.toolTipOpacity);\n  if (isOverRightBorder) {\n    context.moveTo(offset.x, offset.y + 10);\n    context.lineTo(offset.x - arrowWidth, offset.y + 10 - 5);\n    context.lineTo(offset.x - arrowWidth, offset.y + 10 + 5);\n    context.moveTo(offset.x, offset.y + 10);\n    context.fillRect(offset.x - toolTipWidth - arrowWidth, offset.y, toolTipWidth, toolTipHeight);\n  } else {\n    context.moveTo(offset.x, offset.y + 10);\n    context.lineTo(offset.x + arrowWidth, offset.y + 10 - 5);\n    context.lineTo(offset.x + arrowWidth, offset.y + 10 + 5);\n    context.moveTo(offset.x, offset.y + 10);\n    context.fillRect(offset.x + arrowWidth, offset.y, toolTipWidth, toolTipHeight);\n  }\n\n  context.closePath();\n  context.fill();\n  context.setGlobalAlpha(1);\n\n  // draw legend\n  textList.forEach(function (item, index) {\n    context.beginPath();\n    context.setFillStyle(item.color);\n    var startX = offset.x + arrowWidth + 2 * config.toolTipPadding;\n    var startY = offset.y + (config.toolTipLineHeight - config.fontSize) / 2 + config.toolTipLineHeight * index + config.toolTipPadding;\n    if (isOverRightBorder) {\n      startX = offset.x - toolTipWidth - arrowWidth + 2 * config.toolTipPadding;\n    }\n    context.fillRect(startX, startY, legendWidth, config.fontSize);\n    context.closePath();\n  });\n\n  // draw text list\n  context.beginPath();\n  context.setFontSize(config.fontSize);\n  context.setFillStyle('#ffffff');\n  textList.forEach(function (item, index) {\n    var startX = offset.x + arrowWidth + 2 * config.toolTipPadding + legendWidth + legendMarginRight;\n    if (isOverRightBorder) {\n      startX = offset.x - toolTipWidth - arrowWidth + 2 * config.toolTipPadding + +legendWidth + legendMarginRight;\n    }\n    var startY = offset.y + (config.toolTipLineHeight - config.fontSize) / 2 + config.toolTipLineHeight * index + config.toolTipPadding;\n    context.fillText(item.text, startX, startY + config.fontSize);\n  });\n  context.stroke();\n  context.closePath();\n}\n\nfunction drawYAxisTitle(title, opts, config, context) {\n  var startX = config.xAxisHeight + (opts.height - config.xAxisHeight - measureText(title)) / 2;\n  context.save();\n  context.beginPath();\n  context.setFontSize(config.fontSize);\n  context.setFillStyle(opts.yAxis.titleFontColor || '#333333');\n  context.translate(0, opts.height);\n  context.rotate(-90 * Math.PI / 180);\n  context.fillText(title, startX, config.padding + 0.5 * config.fontSize);\n  context.stroke();\n  context.closePath();\n  context.restore();\n}\n\nfunction drawColumnDataPoints(series, opts, config, context) {\n  var process = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : 1;\n\n  var _calYAxisData = calYAxisData(series, opts, config),\n    ranges = _calYAxisData.ranges;\n\n  var _getXAxisPoints = getXAxisPoints(opts.categories, opts, config),\n    xAxisPoints = _getXAxisPoints.xAxisPoints,\n    eachSpacing = _getXAxisPoints.eachSpacing;\n\n  var minRange = ranges.pop();\n  var maxRange = ranges.shift();\n  context.save();\n  if (opts._scrollDistance_ && opts._scrollDistance_ !== 0 && opts.enableScroll === true) {\n    context.translate(opts._scrollDistance_, 0);\n  }\n\n  series.forEach(function (eachSeries, seriesIndex) {\n    var data = eachSeries.data;\n    var points = getDataPoints(data, minRange, maxRange, xAxisPoints, eachSpacing, opts, config, process);\n    points = fixColumeData(points, eachSpacing, series.length, seriesIndex, config, opts);\n\n    // 绘制柱状数据图\n    context.beginPath();\n    context.setFillStyle(eachSeries.color);\n    points.forEach(function (item, index) {\n      if (item !== null) {\n        var startX = item.x - item.width / 2 + 1;\n        var height = opts.height - item.y - config.padding - config.xAxisHeight - config.legendHeight;\n        context.moveTo(startX, item.y);\n        context.rect(startX, item.y, item.width - 2, height);\n      }\n    });\n    context.closePath();\n    context.fill();\n  });\n  series.forEach(function (eachSeries, seriesIndex) {\n    var data = eachSeries.data;\n    var points = getDataPoints(data, minRange, maxRange, xAxisPoints, eachSpacing, opts, config, process);\n    points = fixColumeData(points, eachSpacing, series.length, seriesIndex, config, opts);\n    if (opts.dataLabel !== false && process === 1) {\n      drawPointText(points, eachSeries, config, context);\n    }\n  });\n  context.restore();\n  return {\n    xAxisPoints: xAxisPoints,\n    eachSpacing: eachSpacing\n  };\n}\n\nfunction drawAreaDataPoints(series, opts, config, context) {\n  var process = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : 1;\n\n  var _calYAxisData2 = calYAxisData(series, opts, config),\n    ranges = _calYAxisData2.ranges;\n\n  var _getXAxisPoints2 = getXAxisPoints(opts.categories, opts, config),\n    xAxisPoints = _getXAxisPoints2.xAxisPoints,\n    eachSpacing = _getXAxisPoints2.eachSpacing;\n\n  var minRange = ranges.pop();\n  var maxRange = ranges.shift();\n  var endY = opts.height - config.padding - config.xAxisHeight - config.legendHeight;\n  var calPoints = [];\n\n  context.save();\n  if (opts._scrollDistance_ && opts._scrollDistance_ !== 0 && opts.enableScroll === true) {\n    context.translate(opts._scrollDistance_, 0);\n  }\n\n  if (opts.tooltip && opts.tooltip.textList && opts.tooltip.textList.length && process === 1) {\n    drawToolTipSplitLine(opts.tooltip.offset.x, opts, config, context);\n  }\n\n  series.forEach(function (eachSeries, seriesIndex) {\n    var data = eachSeries.data;\n    var points = getDataPoints(data, minRange, maxRange, xAxisPoints, eachSpacing, opts, config, process);\n    calPoints.push(points);\n\n    var splitPointList = splitPoints(points);\n\n    splitPointList.forEach(function (points) {\n      // 绘制区域数据\n      context.beginPath();\n      context.setStrokeStyle(eachSeries.color);\n      context.setFillStyle(eachSeries.color);\n      context.setGlobalAlpha(0.6);\n      context.setLineWidth(2);\n      if (points.length > 1) {\n        var firstPoint = points[0];\n        var lastPoint = points[points.length - 1];\n\n        context.moveTo(firstPoint.x, firstPoint.y);\n        if (opts.extra.lineStyle === 'curve') {\n          points.forEach(function (item, index) {\n            if (index > 0) {\n              var ctrlPoint = createCurveControlPoints(points, index - 1);\n              context.bezierCurveTo(ctrlPoint.ctrA.x, ctrlPoint.ctrA.y, ctrlPoint.ctrB.x, ctrlPoint.ctrB.y, item.x, item.y);\n            }\n          });\n        } else {\n          points.forEach(function (item, index) {\n            if (index > 0) {\n              context.lineTo(item.x, item.y);\n            }\n          });\n        }\n\n        context.lineTo(lastPoint.x, endY);\n        context.lineTo(firstPoint.x, endY);\n        context.lineTo(firstPoint.x, firstPoint.y);\n      } else {\n        var item = points[0];\n        context.moveTo(item.x - eachSpacing / 2, item.y);\n        context.lineTo(item.x + eachSpacing / 2, item.y);\n        context.lineTo(item.x + eachSpacing / 2, endY);\n        context.lineTo(item.x - eachSpacing / 2, endY);\n        context.moveTo(item.x - eachSpacing / 2, item.y);\n      }\n      context.closePath();\n      context.fill();\n      context.setGlobalAlpha(1);\n    });\n\n    if (opts.dataPointShape !== false) {\n      var shape = config.dataPointShape[seriesIndex % config.dataPointShape.length];\n      drawPointShape(points, eachSeries.color, shape, context);\n    }\n  });\n  if (opts.dataLabel !== false && process === 1) {\n    series.forEach(function (eachSeries, seriesIndex) {\n      var data = eachSeries.data;\n      var points = getDataPoints(data, minRange, maxRange, xAxisPoints, eachSpacing, opts, config, process);\n      drawPointText(points, eachSeries, config, context);\n    });\n  }\n\n  context.restore();\n\n  return {\n    xAxisPoints: xAxisPoints,\n    calPoints: calPoints,\n    eachSpacing: eachSpacing\n  };\n}\n\nfunction drawLineDataPoints(series, opts, config, context) {\n  var process = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : 1;\n\n  var _calYAxisData3 = calYAxisData(series, opts, config),\n    ranges = _calYAxisData3.ranges;\n\n  var _getXAxisPoints3 = getXAxisPoints(opts.categories, opts, config),\n    xAxisPoints = _getXAxisPoints3.xAxisPoints,\n    eachSpacing = _getXAxisPoints3.eachSpacing;\n\n  var minRange = ranges.pop();\n  var maxRange = ranges.shift();\n  var calPoints = [];\n\n  context.save();\n  if (opts._scrollDistance_ && opts._scrollDistance_ !== 0 && opts.enableScroll === true) {\n    context.translate(opts._scrollDistance_, 0);\n  }\n\n  if (opts.tooltip && opts.tooltip.textList && opts.tooltip.textList.length && process === 1) {\n    drawToolTipSplitLine(opts.tooltip.offset.x, opts, config, context);\n  }\n\n  series.forEach(function (eachSeries, seriesIndex) {\n    var data = eachSeries.data;\n    var points = getDataPoints(data, minRange, maxRange, xAxisPoints, eachSpacing, opts, config, process);\n    calPoints.push(points);\n    var splitPointList = splitPoints(points);\n\n    splitPointList.forEach(function (points, index) {\n      context.beginPath();\n      context.setStrokeStyle(eachSeries.color);\n      context.setLineWidth(2);\n      if (points.length === 1) {\n        context.moveTo(points[0].x, points[0].y);\n        context.arc(points[0].x, points[0].y, 1, 0, 2 * Math.PI);\n      } else {\n        context.moveTo(points[0].x, points[0].y);\n        if (opts.extra.lineStyle === 'curve') {\n          points.forEach(function (item, index) {\n            if (index > 0) {\n              var ctrlPoint = createCurveControlPoints(points, index - 1);\n              context.bezierCurveTo(ctrlPoint.ctrA.x, ctrlPoint.ctrA.y, ctrlPoint.ctrB.x, ctrlPoint.ctrB.y, item.x, item.y);\n            }\n          });\n        } else {\n          points.forEach(function (item, index) {\n            if (index > 0) {\n              context.lineTo(item.x, item.y);\n            }\n          });\n        }\n        context.moveTo(points[0].x, points[0].y);\n      }\n      context.closePath();\n      context.stroke();\n    });\n\n    if (opts.dataPointShape !== false) {\n      var shape = config.dataPointShape[seriesIndex % config.dataPointShape.length];\n      drawPointShape(points, eachSeries.color, shape, context);\n    }\n  });\n  if (opts.dataLabel !== false && process === 1) {\n    series.forEach(function (eachSeries, seriesIndex) {\n      var data = eachSeries.data;\n      var points = getDataPoints(data, minRange, maxRange, xAxisPoints, eachSpacing, opts, config, process);\n      drawPointText(points, eachSeries, config, context);\n    });\n  }\n\n  context.restore();\n\n  return {\n    xAxisPoints: xAxisPoints,\n    calPoints: calPoints,\n    eachSpacing: eachSpacing\n  };\n}\n\nfunction drawToolTipBridge(opts, config, context, process) {\n  context.save();\n  if (opts._scrollDistance_ && opts._scrollDistance_ !== 0 && opts.enableScroll === true) {\n    context.translate(opts._scrollDistance_, 0);\n  }\n  if (opts.tooltip && opts.tooltip.textList && opts.tooltip.textList.length && process === 1) {\n    drawToolTip(opts.tooltip.textList, opts.tooltip.offset, opts, config, context);\n  }\n  context.restore();\n}\n\nfunction drawXAxis(categories, opts, config, context) {\n  var _getXAxisPoints4 = getXAxisPoints(categories, opts, config),\n    xAxisPoints = _getXAxisPoints4.xAxisPoints,\n    startX = _getXAxisPoints4.startX,\n    endX = _getXAxisPoints4.endX,\n    eachSpacing = _getXAxisPoints4.eachSpacing;\n\n  var startY = opts.height - config.padding - config.xAxisHeight - config.legendHeight;\n  var endY = startY + config.xAxisLineHeight;\n\n  context.save();\n  if (opts._scrollDistance_ && opts._scrollDistance_ !== 0) {\n    context.translate(opts._scrollDistance_, 0);\n  }\n\n  context.beginPath();\n  context.setStrokeStyle(opts.xAxis.gridColor || \"#cccccc\");\n\n  if (opts.xAxis.disableGrid !== true) {\n    if (opts.xAxis.type === 'calibration') {\n      xAxisPoints.forEach(function (item, index) {\n        if (index > 0) {\n          context.moveTo(item - eachSpacing / 2, startY);\n          context.lineTo(item - eachSpacing / 2, startY + 4);\n        }\n      });\n    } else {\n      xAxisPoints.forEach(function (item, index) {\n        context.moveTo(item, startY);\n        context.lineTo(item, endY);\n      });\n    }\n  }\n  context.closePath();\n  context.stroke();\n\n  // 对X轴列表做抽稀处理\n  var validWidth = opts.width - 2 * config.padding - config.yAxisWidth - config.yAxisTitleWidth;\n  var maxXAxisListLength = Math.min(categories.length, Math.ceil(validWidth / config.fontSize / 1.5));\n  var ratio = Math.ceil(categories.length / maxXAxisListLength);\n\n  categories = categories.map(function (item, index) {\n    return index % ratio !== 0 ? '' : item;\n  });\n\n  if (config._xAxisTextAngle_ === 0) {\n    context.beginPath();\n    context.setFontSize(config.fontSize);\n    context.setFillStyle(opts.xAxis.fontColor || '#666666');\n    categories.forEach(function (item, index) {\n      var offset = eachSpacing / 2 - measureText(item) / 2;\n      context.fillText(item, xAxisPoints[index] + offset, startY + config.fontSize + 5);\n    });\n    context.closePath();\n    context.stroke();\n  } else {\n    categories.forEach(function (item, index) {\n      context.save();\n      context.beginPath();\n      context.setFontSize(config.fontSize);\n      context.setFillStyle(opts.xAxis.fontColor || '#666666');\n      var textWidth = measureText(item);\n      var offset = eachSpacing / 2 - textWidth;\n\n      var _calRotateTranslate = calRotateTranslate(xAxisPoints[index] + eachSpacing / 2, startY + config.fontSize / 2 + 5, opts.height),\n        transX = _calRotateTranslate.transX,\n        transY = _calRotateTranslate.transY;\n\n      context.rotate(-1 * config._xAxisTextAngle_);\n      context.translate(transX, transY);\n      context.fillText(item, xAxisPoints[index] + offset, startY + config.fontSize + 5);\n      context.closePath();\n      context.stroke();\n      context.restore();\n    });\n  }\n\n  context.restore();\n}\n\nfunction drawYAxisGrid(opts, config, context) {\n  var spacingValid = opts.height - 2 * config.padding - config.xAxisHeight - config.legendHeight;\n  var eachSpacing = Math.floor(spacingValid / config.yAxisSplit);\n  var yAxisTotalWidth = config.yAxisWidth + config.yAxisTitleWidth;\n  var startX = config.padding + yAxisTotalWidth;\n  var endX = opts.width - config.padding;\n\n  var points = [];\n  for (var i = 0; i < config.yAxisSplit; i++) {\n    points.push(config.padding + eachSpacing * i);\n  }\n  points.push(config.padding + eachSpacing * config.yAxisSplit + 2);\n\n  context.beginPath();\n  context.setStrokeStyle(opts.yAxis.gridColor || \"#cccccc\");\n  context.setLineWidth(1);\n  points.forEach(function (item, index) {\n    context.moveTo(startX, item);\n    context.lineTo(endX, item);\n  });\n  context.closePath();\n  context.stroke();\n}\n\nfunction drawYAxis(series, opts, config, context) {\n  if (opts.yAxis.disabled === true) {\n    return;\n  }\n\n  var _calYAxisData4 = calYAxisData(series, opts, config),\n    rangesFormat = _calYAxisData4.rangesFormat;\n\n  var yAxisTotalWidth = config.yAxisWidth + config.yAxisTitleWidth;\n\n  var spacingValid = opts.height - 2 * config.padding - config.xAxisHeight - config.legendHeight;\n  var eachSpacing = Math.floor(spacingValid / config.yAxisSplit);\n  var startX = config.padding + yAxisTotalWidth;\n  var endX = opts.width - config.padding;\n  var endY = opts.height - config.padding - config.xAxisHeight - config.legendHeight;\n\n  // set YAxis background\n  context.setFillStyle(opts.background || '#ffffff');\n  if (opts._scrollDistance_ < 0) {\n    context.fillRect(0, 0, startX, endY + config.xAxisHeight + 5);\n  }\n  context.fillRect(endX, 0, opts.width, endY + config.xAxisHeight + 5);\n\n  var points = [];\n  for (var i = 0; i <= config.yAxisSplit; i++) {\n    points.push(config.padding + eachSpacing * i);\n  }\n\n  context.stroke();\n  context.beginPath();\n  context.setFontSize(config.fontSize);\n  context.setFillStyle(opts.yAxis.fontColor || '#666666');\n  rangesFormat.forEach(function (item, index) {\n    var pos = points[index] ? points[index] : endY;\n    context.fillText(item, config.padding + config.yAxisTitleWidth, pos + config.fontSize / 2);\n  });\n  context.closePath();\n  context.stroke();\n\n  if (opts.yAxis.title) {\n    drawYAxisTitle(opts.yAxis.title, opts, config, context);\n  }\n}\n\nfunction drawLegend(series, opts, config, context) {\n  if (!opts.legend) {\n    return;\n  }\n  // each legend shape width 15px\n  // the spacing between shape and text in each legend is the `padding`\n  // each legend spacing is the `padding`\n  // legend margin top `config.padding`\n\n  var _calLegendData = calLegendData(series, opts, config),\n    legendList = _calLegendData.legendList;\n\n  var padding = 5;\n  var marginTop = 8;\n  var shapeWidth = 15;\n  legendList.forEach(function (itemList, listIndex) {\n    var width = 0;\n    itemList.forEach(function (item) {\n      item.name = item.name || 'undefined';\n      width += 3 * padding + measureText(item.name) + shapeWidth;\n    });\n    var startX = (opts.width - width) / 2 + padding;\n    var startY = opts.height - config.padding - config.legendHeight + listIndex * (config.fontSize + marginTop) + padding + marginTop;\n\n    context.setFontSize(config.fontSize);\n    itemList.forEach(function (item) {\n      switch (opts.type) {\n        case 'line':\n          context.beginPath();\n          context.setLineWidth(1);\n          context.setStrokeStyle(item.color);\n          context.moveTo(startX - 2, startY + 5);\n          context.lineTo(startX + 17, startY + 5);\n          context.stroke();\n          context.closePath();\n          context.beginPath();\n          context.setLineWidth(1);\n          context.setStrokeStyle('#ffffff');\n          context.setFillStyle(item.color);\n          context.moveTo(startX + 7.5, startY + 5);\n          context.arc(startX + 7.5, startY + 5, 4, 0, 2 * Math.PI);\n          context.fill();\n          context.stroke();\n          context.closePath();\n          break;\n        case 'pie':\n        case 'ring':\n          context.beginPath();\n          context.setFillStyle(item.color);\n          context.moveTo(startX + 7.5, startY + 5);\n          context.arc(startX + 7.5, startY + 5, 7, 0, 2 * Math.PI);\n          context.closePath();\n          context.fill();\n          break;\n        default:\n          context.beginPath();\n          context.setFillStyle(item.color);\n          context.moveTo(startX, startY);\n          context.rect(startX, startY, 15, 10);\n          context.closePath();\n          context.fill();\n      }\n      startX += padding + shapeWidth;\n      context.beginPath();\n      context.setFillStyle(opts.extra.legendTextColor || '#333333');\n      context.fillText(item.name, startX, startY + 9);\n      context.closePath();\n      context.stroke();\n      startX += measureText(item.name) + 2 * padding;\n    });\n  });\n}\nfunction drawPieDataPoints(series, opts, config, context) {\n  var process = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : 1;\n\n  var pieOption = opts.extra.pie || {};\n  series = getPieDataPoints(series, process);\n  var centerPosition = {\n    x: opts.width / 2,\n    y: (opts.height - config.legendHeight) / 2\n  };\n  var radius = Math.min(centerPosition.x - config.pieChartLinePadding - config.pieChartTextPadding - config._pieTextMaxLength_, centerPosition.y - config.pieChartLinePadding - config.pieChartTextPadding);\n  if (opts.dataLabel) {\n    radius -= 10;\n  } else {\n    radius -= 2 * config.padding;\n  }\n  series = series.map(function (eachSeries) {\n    eachSeries._start_ += (pieOption.offsetAngle || 0) * Math.PI / 180;\n    return eachSeries;\n  });\n  series.forEach(function (eachSeries) {\n    context.beginPath();\n    context.setLineWidth(2);\n    context.setStrokeStyle('#ffffff');\n    context.setFillStyle(eachSeries.color);\n    context.moveTo(centerPosition.x, centerPosition.y);\n    context.arc(centerPosition.x, centerPosition.y, radius, eachSeries._start_, eachSeries._start_ + 2 * eachSeries._proportion_ * Math.PI);\n    context.closePath();\n    context.fill();\n    if (opts.disablePieStroke !== true) {\n      context.stroke();\n    }\n  });\n\n  if (opts.type === 'ring') {\n    var innerPieWidth = radius * 0.6;\n    if (typeof opts.extra.ringWidth === 'number' && opts.extra.ringWidth > 0) {\n      innerPieWidth = Math.max(0, radius - opts.extra.ringWidth);\n    }\n    context.beginPath();\n    context.setFillStyle(opts.background || '#ffffff');\n    context.moveTo(centerPosition.x, centerPosition.y);\n    context.arc(centerPosition.x, centerPosition.y, innerPieWidth, 0, 2 * Math.PI);\n    context.closePath();\n    context.fill();\n  }\n\n  if (opts.dataLabel !== false && process === 1) {\n    // fix https://github.com/xiaolin3303/wx-charts/issues/132\n    var valid = false;\n    for (var i = 0, len = series.length; i < len; i++) {\n      if (series[i].data > 0) {\n        valid = true;\n        break;\n      }\n    }\n\n    if (valid) {\n      drawPieText(series, opts, config, context, radius, centerPosition);\n    }\n  }\n\n  if (process === 1 && opts.type === 'ring') {\n    drawRingTitle(opts, config, context);\n  }\n\n  return {\n    center: centerPosition,\n    radius: radius,\n    series: series\n  };\n}\n\nfunction drawRadarDataPoints(series, opts, config, context) {\n  var process = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : 1;\n\n  var radarOption = opts.extra.radar || {};\n  var coordinateAngle = getRadarCoordinateSeries(opts.categories.length);\n  var centerPosition = {\n    x: opts.width / 2,\n    y: (opts.height - config.legendHeight) / 2\n  };\n\n  var radius = Math.min(centerPosition.x - (getMaxTextListLength(opts.categories) + config.radarLabelTextMargin), centerPosition.y - config.radarLabelTextMargin);\n\n  radius -= config.padding;\n\n  // draw grid\n  context.beginPath();\n  context.setLineWidth(1);\n  context.setStrokeStyle(radarOption.gridColor || \"#cccccc\");\n  coordinateAngle.forEach(function (angle) {\n    var pos = convertCoordinateOrigin(radius * Math.cos(angle), radius * Math.sin(angle), centerPosition);\n    context.moveTo(centerPosition.x, centerPosition.y);\n    context.lineTo(pos.x, pos.y);\n  });\n  context.stroke();\n  context.closePath();\n\n  // draw split line grid\n\n  var _loop = function _loop(i) {\n    var startPos = {};\n    context.beginPath();\n    context.setLineWidth(1);\n    context.setStrokeStyle(radarOption.gridColor || \"#cccccc\");\n    coordinateAngle.forEach(function (angle, index) {\n      var pos = convertCoordinateOrigin(radius / config.radarGridCount * i * Math.cos(angle), radius / config.radarGridCount * i * Math.sin(angle), centerPosition);\n      if (index === 0) {\n        startPos = pos;\n        context.moveTo(pos.x, pos.y);\n      } else {\n        context.lineTo(pos.x, pos.y);\n      }\n    });\n    context.lineTo(startPos.x, startPos.y);\n    context.stroke();\n    context.closePath();\n  };\n\n  for (var i = 1; i <= config.radarGridCount; i++) {\n    _loop(i);\n  }\n\n  var radarDataPoints = getRadarDataPoints(coordinateAngle, centerPosition, radius, series, opts, process);\n  radarDataPoints.forEach(function (eachSeries, seriesIndex) {\n    // 绘制区域数据\n    context.beginPath();\n    context.setFillStyle(eachSeries.color);\n    context.setGlobalAlpha(0.6);\n    eachSeries.data.forEach(function (item, index) {\n      if (index === 0) {\n        context.moveTo(item.position.x, item.position.y);\n      } else {\n        context.lineTo(item.position.x, item.position.y);\n      }\n    });\n    context.closePath();\n    context.fill();\n    context.setGlobalAlpha(1);\n\n    if (opts.dataPointShape !== false) {\n      var shape = config.dataPointShape[seriesIndex % config.dataPointShape.length];\n      var points = eachSeries.data.map(function (item) {\n        return item.position;\n      });\n      drawPointShape(points, eachSeries.color, shape, context);\n    }\n  });\n  // draw label text\n  drawRadarLabel(coordinateAngle, radius, centerPosition, opts, config, context);\n\n  return {\n    center: centerPosition,\n    radius: radius,\n    angleList: coordinateAngle\n  };\n}\n\nfunction drawCanvas(opts, context) {\n  context.draw();\n}\n\nvar Timing = {\n  easeIn: function easeIn(pos) {\n    return Math.pow(pos, 3);\n  },\n\n  easeOut: function easeOut(pos) {\n    return Math.pow(pos - 1, 3) + 1;\n  },\n\n  easeInOut: function easeInOut(pos) {\n    if ((pos /= 0.5) < 1) {\n      return 0.5 * Math.pow(pos, 3);\n    } else {\n      return 0.5 * (Math.pow(pos - 2, 3) + 2);\n    }\n  },\n\n  linear: function linear(pos) {\n    return pos;\n  }\n};\n\nfunction Animation(opts) {\n  this.isStop = false;\n  opts.duration = typeof opts.duration === 'undefined' ? 1000 : opts.duration;\n  opts.timing = opts.timing || 'linear';\n\n  var delay = 17;\n\n  var createAnimationFrame = function createAnimationFrame() {\n    if (typeof requestAnimationFrame !== 'undefined') {\n      return requestAnimationFrame;\n    } else if (typeof setTimeout !== 'undefined') {\n      return function (step, delay) {\n        setTimeout(function () {\n          var timeStamp = +new Date();\n          step(timeStamp);\n        }, delay);\n      };\n    } else {\n      return function (step) {\n        step(null);\n      };\n    }\n  };\n  var animationFrame = createAnimationFrame();\n  var startTimeStamp = null;\n  var _step = function step(timestamp) {\n    if (timestamp === null || this.isStop === true) {\n      opts.onProcess && opts.onProcess(1);\n      opts.onAnimationFinish && opts.onAnimationFinish();\n      return;\n    }\n    if (startTimeStamp === null) {\n      startTimeStamp = timestamp;\n    }\n    if (timestamp - startTimeStamp < opts.duration) {\n      var process = (timestamp - startTimeStamp) / opts.duration;\n      var timingFunction = Timing[opts.timing];\n      process = timingFunction(process);\n      opts.onProcess && opts.onProcess(process);\n      animationFrame(_step, delay);\n    } else {\n      opts.onProcess && opts.onProcess(1);\n      opts.onAnimationFinish && opts.onAnimationFinish();\n    }\n  };\n  _step = _step.bind(this);\n\n  animationFrame(_step, delay);\n}\n\n// stop animation immediately\n// and tigger onAnimationFinish\nAnimation.prototype.stop = function () {\n  this.isStop = true;\n};\n\nfunction drawCharts(type, opts, config, context) {\n  var _this = this;\n\n  var series = opts.series;\n  var categories = opts.categories;\n  series = fillSeriesColor(series, config);\n\n  var _calLegendData = calLegendData(series, opts, config),\n    legendHeight = _calLegendData.legendHeight;\n\n  config.legendHeight = legendHeight;\n\n  var _calYAxisData = calYAxisData(series, opts, config),\n    yAxisWidth = _calYAxisData.yAxisWidth;\n\n  config.yAxisWidth = yAxisWidth;\n  if (categories && categories.length) {\n    var _calCategoriesData = calCategoriesData(categories, opts, config),\n      xAxisHeight = _calCategoriesData.xAxisHeight,\n      angle = _calCategoriesData.angle;\n\n    config.xAxisHeight = xAxisHeight;\n    config._xAxisTextAngle_ = angle;\n  }\n  if (type === 'pie' || type === 'ring') {\n    config._pieTextMaxLength_ = opts.dataLabel === false ? 0 : getPieTextMaxLength(series);\n  }\n\n  var duration = opts.animation ? 1000 : 0;\n  this.animationInstance && this.animationInstance.stop();\n  switch (type) {\n    case 'line':\n      this.animationInstance = new Animation({\n        timing: 'easeIn',\n        duration: duration,\n        onProcess: function onProcess(process) {\n          drawYAxisGrid(opts, config, context);\n\n          var _drawLineDataPoints = drawLineDataPoints(series, opts, config, context, process),\n            xAxisPoints = _drawLineDataPoints.xAxisPoints,\n            calPoints = _drawLineDataPoints.calPoints,\n            eachSpacing = _drawLineDataPoints.eachSpacing;\n\n          _this.chartData.xAxisPoints = xAxisPoints;\n          _this.chartData.calPoints = calPoints;\n          _this.chartData.eachSpacing = eachSpacing;\n          drawXAxis(categories, opts, config, context);\n          drawLegend(opts.series, opts, config, context);\n          drawYAxis(series, opts, config, context);\n          drawToolTipBridge(opts, config, context, process);\n          drawCanvas(opts, context);\n        },\n        onAnimationFinish: function onAnimationFinish() {\n          _this.event.trigger('renderComplete');\n        }\n      });\n      break;\n    case 'column':\n      this.animationInstance = new Animation({\n        timing: 'easeIn',\n        duration: duration,\n        onProcess: function onProcess(process) {\n          drawYAxisGrid(opts, config, context);\n\n          var _drawColumnDataPoints = drawColumnDataPoints(series, opts, config, context, process),\n            xAxisPoints = _drawColumnDataPoints.xAxisPoints,\n            eachSpacing = _drawColumnDataPoints.eachSpacing;\n\n          _this.chartData.xAxisPoints = xAxisPoints;\n          _this.chartData.eachSpacing = eachSpacing;\n          drawXAxis(categories, opts, config, context);\n          drawLegend(opts.series, opts, config, context);\n          drawYAxis(series, opts, config, context);\n          drawCanvas(opts, context);\n        },\n        onAnimationFinish: function onAnimationFinish() {\n          _this.event.trigger('renderComplete');\n        }\n      });\n      break;\n    case 'area':\n      this.animationInstance = new Animation({\n        timing: 'easeIn',\n        duration: duration,\n        onProcess: function onProcess(process) {\n          drawYAxisGrid(opts, config, context);\n\n          var _drawAreaDataPoints = drawAreaDataPoints(series, opts, config, context, process),\n            xAxisPoints = _drawAreaDataPoints.xAxisPoints,\n            calPoints = _drawAreaDataPoints.calPoints,\n            eachSpacing = _drawAreaDataPoints.eachSpacing;\n\n          _this.chartData.xAxisPoints = xAxisPoints;\n          _this.chartData.calPoints = calPoints;\n          _this.chartData.eachSpacing = eachSpacing;\n          drawXAxis(categories, opts, config, context);\n          drawLegend(opts.series, opts, config, context);\n          drawYAxis(series, opts, config, context);\n          drawToolTipBridge(opts, config, context, process);\n          drawCanvas(opts, context);\n        },\n        onAnimationFinish: function onAnimationFinish() {\n          _this.event.trigger('renderComplete');\n        }\n      });\n      break;\n    case 'ring':\n    case 'pie':\n      this.animationInstance = new Animation({\n        timing: 'easeInOut',\n        duration: duration,\n        onProcess: function onProcess(process) {\n          _this.chartData.pieData = drawPieDataPoints(series, opts, config, context, process);\n          drawLegend(opts.series, opts, config, context);\n          drawCanvas(opts, context);\n        },\n        onAnimationFinish: function onAnimationFinish() {\n          _this.event.trigger('renderComplete');\n        }\n      });\n      break;\n    case 'radar':\n      this.animationInstance = new Animation({\n        timing: 'easeInOut',\n        duration: duration,\n        onProcess: function onProcess(process) {\n          _this.chartData.radarData = drawRadarDataPoints(series, opts, config, context, process);\n          drawLegend(opts.series, opts, config, context);\n          drawCanvas(opts, context);\n        },\n        onAnimationFinish: function onAnimationFinish() {\n          _this.event.trigger('renderComplete');\n        }\n      });\n      break;\n  }\n}\n\n// simple event implement\n\nfunction Event() {\n  this.events = {};\n}\n\nEvent.prototype.addEventListener = function (type, listener) {\n  this.events[type] = this.events[type] || [];\n  this.events[type].push(listener);\n};\n\nEvent.prototype.trigger = function () {\n  for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n    args[_key] = arguments[_key];\n  }\n\n  var type = args[0];\n  var params = args.slice(1);\n  if (!!this.events[type]) {\n    this.events[type].forEach(function (listener) {\n      try {\n        listener.apply(null, params);\n      } catch (e) {\n        console.error(e);\n      }\n    });\n  }\n};\n\nvar Charts = function Charts(opts) {\n  opts.title = opts.title || {};\n  opts.subtitle = opts.subtitle || {};\n  opts.yAxis = opts.yAxis || {};\n  opts.xAxis = opts.xAxis || {};\n  opts.extra = opts.extra || {};\n  opts.legend = opts.legend === false ? false : true;\n  opts.animation = opts.animation === false ? false : true;\n  var config$$1 = assign({}, config);\n  config$$1.yAxisTitleWidth = opts.yAxis.disabled !== true && opts.yAxis.title ? config$$1.yAxisTitleWidth : 0;\n  config$$1.pieChartLinePadding = opts.dataLabel === false ? 0 : config$$1.pieChartLinePadding;\n  config$$1.pieChartTextPadding = opts.dataLabel === false ? 0 : config$$1.pieChartTextPadding;\n\n  this.opts = opts;\n  this.config = config$$1;\n  this.context = wx.createCanvasContext(opts.canvasId);\n  // store calcuated chart data\n  // such as chart point coordinate\n  this.chartData = {};\n  this.event = new Event();\n  this.scrollOption = {\n    currentOffset: 0,\n    startTouchX: 0,\n    distance: 0\n  };\n\n  drawCharts.call(this, opts.type, opts, config$$1, this.context);\n};\n\nCharts.prototype.updateData = function () {\n  var data = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n  this.opts.series = data.series || this.opts.series;\n  this.opts.categories = data.categories || this.opts.categories;\n\n  this.opts.title = assign({}, this.opts.title, data.title || {});\n  this.opts.subtitle = assign({}, this.opts.subtitle, data.subtitle || {});\n\n  drawCharts.call(this, this.opts.type, this.opts, this.config, this.context);\n};\n\nCharts.prototype.stopAnimation = function () {\n  this.animationInstance && this.animationInstance.stop();\n};\n\nCharts.prototype.addEventListener = function (type, listener) {\n  this.event.addEventListener(type, listener);\n};\n\nCharts.prototype.getCurrentDataIndex = function (e) {\n  var touches = e.touches && e.touches.length ? e.touches : e.changedTouches;\n  if (touches && touches.length) {\n    var _touches$ = touches[0],\n      x = _touches$.x,\n      y = _touches$.y;\n\n    if (this.opts.type === 'pie' || this.opts.type === 'ring') {\n      return findPieChartCurrentIndex({ x: x, y: y }, this.chartData.pieData);\n    } else if (this.opts.type === 'radar') {\n      return findRadarChartCurrentIndex({ x: x, y: y }, this.chartData.radarData, this.opts.categories.length);\n    } else {\n      return findCurrentIndex({ x: x, y: y }, this.chartData.xAxisPoints, this.opts, this.config, Math.abs(this.scrollOption.currentOffset));\n    }\n  }\n  return -1;\n};\n\nCharts.prototype.showToolTip = function (e) {\n  var option = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n  if (this.opts.type === 'line' || this.opts.type === 'area') {\n    var index = this.getCurrentDataIndex(e);\n    var currentOffset = this.scrollOption.currentOffset;\n\n    var opts = assign({}, this.opts, {\n      _scrollDistance_: currentOffset,\n      animation: false\n    });\n    if (index > -1) {\n      var seriesData = getSeriesDataItem(this.opts.series, index);\n      if (seriesData.length !== 0) {\n        var _getToolTipData = getToolTipData(seriesData, this.chartData.calPoints, index, this.opts.categories, option),\n          textList = _getToolTipData.textList,\n          offset = _getToolTipData.offset;\n\n        opts.tooltip = {\n          textList: textList,\n          offset: offset,\n          option: option\n        };\n      }\n    }\n    drawCharts.call(this, opts.type, opts, this.config, this.context);\n  }\n};\n\nCharts.prototype.scrollStart = function (e) {\n  if (e.touches[0] && this.opts.enableScroll === true) {\n    this.scrollOption.startTouchX = e.touches[0].x;\n  }\n};\n\nCharts.prototype.scroll = function (e) {\n  // TODO throtting...\n  if (e.touches[0] && this.opts.enableScroll === true) {\n    var _distance = e.touches[0].x - this.scrollOption.startTouchX;\n    var currentOffset = this.scrollOption.currentOffset;\n\n    var validDistance = calValidDistance(currentOffset + _distance, this.chartData, this.config, this.opts);\n\n    this.scrollOption.distance = _distance = validDistance - currentOffset;\n    var opts = assign({}, this.opts, {\n      _scrollDistance_: currentOffset + _distance,\n      animation: false\n    });\n\n    drawCharts.call(this, opts.type, opts, this.config, this.context);\n  }\n};\n\nCharts.prototype.scrollEnd = function (e) {\n  if (this.opts.enableScroll === true) {\n    var _scrollOption = this.scrollOption,\n      currentOffset = _scrollOption.currentOffset,\n      distance = _scrollOption.distance;\n\n    this.scrollOption.currentOffset = currentOffset + distance;\n    this.scrollOption.distance = 0;\n  }\n};\n\nmodule.exports = Charts;"]}